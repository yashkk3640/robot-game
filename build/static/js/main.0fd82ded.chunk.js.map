{"version":3,"sources":["Square.js","randomCube.js","Robot.js","main.js","App.js","index.js"],"names":["diamondGeometry","OctahedronGeometry","bubbleGeometry","IcosahedronBufferGeometry","diamondMaterial","MeshStandardMaterial","color","roughness","metalness","bubbleMaterial","MeshLambertMaterial","opacity","transparent","cube","Mesh","createCube","MeshBasicMaterial","RandomCube","pointCube","cubes","model","mulX","Math","random","mulZ","x","round","z","nx","nz","checkCollide","console","log","lenght","filter","position","y","obj","len","diffX","diffZ","sqrt","dcubes","textureSize","window","devicePixelRatio","Robot","mixer","actions","activeAction","previousAction","i","pointView","geometry","centerOffset","font","requestID","point","setAlive","currKey","state","direction","value","mount","useRef","camera","THREE","innerWidth","innerHeight","set","scene","clock","forEach","add","dir","normalize","origin","arrowHelper","light","mesh","depthWrite","rotation","PI","grid","material","loader","GLTFLoader","renderer","antialias","alpha","loadText","current","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","weight","bevelOffset","bevelSegments","computeBoundingBox","computeVertexNormals","boundingBox","max","min","castShadow","load","res","e","marsGeo","marsMaterials","map","side","marsMaterial","mars","useEffect","gltf","createGUI","animations","setPixelRatio","setSize","autoClear","gammaOutput","gammaFactor","appendChild","domElement","lookAt","addDangerCube","animate","undefined","error","keypress","onKeyPress","addEventListener","onWindowResize","removeEventListener","states","emotes","length","clip","action","clipAction","name","indexOf","clampWhenFinished","loop","play","fadeToAction","duration","callback","fadeOut","setTimeout","reset","setEffectiveTimeScale","setEffectiveWeight","fadeIn","aspect","updateProjectionMatrix","dt","getDelta","update","requestAnimationFrame","render","_clip","success","setDirection","deathCubesColide","cancelAnimationFrame","key","keyCode","rotate","remove","newCube","push","document","getElementsByClassName","innerHTML","slice","ref","style","bottom","right","onClick","Main","useState","alive","display","justifyContent","alignContent","backgroundColor","className","flexFlow","alignItems","width","top","App","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.0fd82ded.chunk.js","sourcesContent":["import React, { useEffect, useRef, useCallback } from \"react\";\r\nimport { Scene, PerspectiveCamera, WebGLRenderer, OctahedronGeometry, MeshBasicMaterial, Mesh, IcosahedronBufferGeometry, MeshLambertMaterial, MeshStandardMaterial } from \"three\";\r\n\r\nvar diamondGeometry = new OctahedronGeometry(2, 0);\r\nvar bubbleGeometry = new IcosahedronBufferGeometry(4, 1)\r\nvar diamondMaterial = new MeshStandardMaterial({ color: 0xd4af37, roughness: 0.5, metalness: 1.0 })\r\nvar bubbleMaterial = new MeshLambertMaterial({ color: 0xffffff, opacity: 0.6, transparent: true})\r\n\r\nexport const cube = new Mesh(diamondGeometry, diamondMaterial);\r\nexport const dangerCube = new Mesh(diamondGeometry, new MeshBasicMaterial({ color: 0xaaaaaa }));\r\nexport const createCube = () => new Mesh(bubbleGeometry, bubbleMaterial)\r\n\r\nconst Square = () => {\r\n    const mount = useRef()\r\n    const scene = new Scene();\r\n    const camera = new PerspectiveCamera(\r\n        75,\r\n        window.innerWidth / window.innerHeight,\r\n        0.1,\r\n        1000\r\n    );\r\n    const renderer = new WebGLRenderer();\r\n    camera.position.z = 5;\r\n\r\n    const animate = useCallback(() => {\r\n        requestAnimationFrame(animate);\r\n\r\n        // cube.rotation.x += 0.01;\r\n        cube.rotation.y += 0.01;\r\n\r\n        renderer.render(scene, camera);\r\n    }, [camera, renderer, scene]);\r\n\r\n\r\n    useEffect(() => {\r\n        renderer.setSize(window.innerWidth, window.innerHeight);\r\n        mount.current.appendChild(renderer.domElement);\r\n\r\n        scene.add(cube);\r\n        animate();\r\n    }, [animate, renderer, scene])\r\n    return <div ref={ref => (mount.current = ref)} />;\r\n\r\n}\r\nexport default Square;","// import React from 'react'\r\n\r\nexport const RandomCube = (cube, pointCube, cubes, model) => {\r\n\r\n    const mulX = Math.random() > 0.5 ? 1 : -1\r\n    const mulZ = Math.random() > 0.5 ? 1 : -1\r\n    const x = Math.round(Math.random() * 50) * 2 * mulX\r\n    const z = Math.round(Math.random() * 50) * 2 * mulZ\r\n\r\n\r\n    const nx = mulX > 0 ? x - x % 25 - 2.5 : x - x % 25 + 2.5\r\n    const nz = mulZ > 0 ? z - z % 25 - 2.5 : z - z % 25 + 2.5\r\n    // if (model && model.x === nx && model.z === nz) {\r\n    if (model && checkCollide(model,{x:nx,z:nz},8)) {\r\n        console.log('model colide')\r\n        RandomCube(cube, pointCube, cubes, model)\r\n        return\r\n    }\r\n    if (pointCube && pointCube.x === nx && pointCube.z === nz) {\r\n        RandomCube(cube, pointCube, cubes, model)\r\n        return\r\n    }\r\n    if (cubes && cubes.lenght > 0 && cubes.filter(cube => cube.position.x === nx && cube.position.z === nz) > 0) {\r\n        console.log('Danger colide')\r\n        RandomCube(cube, pointCube, cubes, model)\r\n        return\r\n    }\r\n    cube.position.x = nx\r\n    cube.position.z = nz\r\n    cube.position.y = 2.6\r\n}\r\n\r\nexport const checkCollide = (model, obj, len) => {\r\n\r\n    const diffX = model.x - obj.x\r\n    const diffZ = model.z - obj.z\r\n    // if(Math.round(model.x) == obj.x  && Math.round(model.z) == obj.z )\r\n    if (Math.sqrt(diffX * diffX + diffZ * diffZ) < len)\r\n        return true\r\n    return false\r\n}\r\n\r\nexport const UP = 'w'\r\nexport const DOWN = 's'\r\nexport const RIGHT = 'd'\r\nexport const LEFT = 'a'\r\nexport const WALK_SPEED = 0.1\r\nexport const RUN_SPEED = 0.2","import React, { useRef, useEffect } from 'react';\r\n\r\nimport * as THREE from \"three\";\r\nimport GLTFLoader from 'three-gltf-loader'\r\n\r\n// import Stats from 'three/examples/jsm/libs/stats.module.js';\r\n// import { GUI } from 'three/examples/jsm/libs/dat.gui.module.js';\r\n// import FontType from 'three/examples/fonts/gentilis_bold.typeface.json';\r\n// import RobotGlb from 'RobotExpressive.glb'\r\n\r\n// import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\nimport { cube, createCube } from './Square'\r\nimport { RandomCube, checkCollide, UP, DOWN, LEFT, RIGHT, WALK_SPEED, RUN_SPEED } from './randomCube';\r\n\r\nconst dcubes = [createCube(), createCube(), createCube(), createCube(), createCube(), createCube(), createCube(), createCube()]\r\nvar dpr = window.devicePixelRatio;\r\nconst textureSize = 512 * dpr;\r\nconsole.log(textureSize)\r\n\r\nconst Robot = ({ point, setAlive }) => {\r\n    // var gui, mixer, actions, activeAction, previousAction, i;\r\n    // var face, pointView, geometry, centerOffset, font, point = 1;\r\n    // var api = { state: 'Walking' };\r\n    RandomCube(cube)\r\n    let mixer, actions, activeAction, previousAction, i, pointView, geometry, centerOffset, font, requestID;\r\n    // let texture, sprite, controls;\r\n    var currKey = UP\r\n    var state = { direction: 'z', value: 1 };\r\n\r\n    const mount = useRef()\r\n    const model = useRef()\r\n\r\n    // const topScene = new THREE.Scene();\r\n    // topScene.background = THREE.transparent();\r\n\r\n    // const topCamera = new THREE.PerspectiveCamera(-75, window.innerWidth / window.innerHeight, 0.25, 300);\r\n    // topCamera.position.y = 100\r\n    // topCamera.lookAt(new THREE.Vector3(0, 0, 0))\r\n\r\n    const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.25, 20000);\r\n    camera.position.set(0, 10, -30);\r\n    // camera.lookAt(new THREE.Vector3(2, 2, 0));\r\n\r\n    const scene = new THREE.Scene();\r\n    // scene.background = new THREE.Color(0xe0e0e0);\r\n    // scene.fog = new THREE.Fog(0xe0e0e0, 100, 1000);\r\n\r\n    const clock = new THREE.Clock();\r\n    // const stats = new Stats();\r\n\r\n    dcubes.forEach(cube => {\r\n        scene.add(cube)\r\n    });\r\n    // arrow\r\n    var dir = new THREE.Vector3(1, 0, 0);\r\n\r\n    //normalize the direction vector (convert to vector of length 1)\r\n    dir.normalize();\r\n\r\n    var origin = new THREE.Vector3(0, 0.1, -5);\r\n    var length = 5;\r\n    var hex = 0xff0000;\r\n\r\n    var arrowHelper = new THREE.ArrowHelper(dir, origin, length, hex, 3);\r\n\r\n    // lights\r\n\r\n    var light = new THREE.HemisphereLight(0xffffff, 0x444444);\r\n    light.position.set(0, 20, 0);\r\n    scene.add(light);\r\n\r\n    light = new THREE.DirectionalLight(0xffffff);\r\n    light.position.set(0, 20, 10);\r\n    scene.add(light);\r\n\r\n    // ground\r\n\r\n    var mesh = new THREE.Mesh(new THREE.PlaneBufferGeometry(2000, 2000), new THREE.MeshPhongMaterial({ color: 0xffffff, depthWrite: false }));\r\n    mesh.rotation.x = - Math.PI / 2;\r\n    scene.add(mesh);\r\n\r\n    var grid = new THREE.GridHelper(200, 40, 0x00000, 0x00000);\r\n\r\n    grid.material.opacity = 0.2;\r\n    grid.material.transparent = false;\r\n    scene.add(grid);\r\n\r\n    scene.add(cube)\r\n\r\n    // model\r\n\r\n    var loader = new GLTFLoader();\r\n\r\n    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\r\n\r\n    const loadText = () => {\r\n        geometry = new THREE.TextGeometry(`Point ${point.current}`, {\r\n            font: font,\r\n            size: 2,\r\n            height: 1,\r\n            curveSegments: 1,\r\n            bevelEnabled: true,\r\n            bevelThickness: 0.1,\r\n            bevelSize: 0.01,\r\n            weight: \"normal\",\r\n            bevelOffset: 0,\r\n            bevelSegments: 1\r\n        });\r\n        geometry.computeBoundingBox();\r\n        geometry.computeVertexNormals();\r\n\r\n        centerOffset =\r\n            -0.5 * (geometry.boundingBox.max.x - geometry.boundingBox.min.x);\r\n\r\n        pointView = new THREE.Mesh(geometry, new THREE.MeshLambertMaterial({ color: 0x2233aa }))\r\n        pointView.rotation.y = 3.2\r\n        pointView.position.y = 5\r\n        pointView.position.x = centerOffset\r\n        pointView.castShadow = true;\r\n        scene.add(pointView)\r\n    }\r\n\r\n    // Text\r\n\r\n    var load = new THREE.FontLoader();\r\n    load.load('helvetiker_regular.typeface.js', function (res) {\r\n        font = res\r\n        loadText()\r\n    }, null, e => console.log(e));\r\n\r\n    var marsGeo = new THREE.CubeGeometry(1000, 1000, 1000);\r\n    var marsMaterials = [\r\n        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load('mars/mandaris_ft.png'), side: THREE.DoubleSide }),\r\n        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load('mars/mandaris_bk.png'), side: THREE.DoubleSide }),\r\n        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load('mars/mandaris_up.png'), side: THREE.DoubleSide }),\r\n        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load('mars/mandaris_dn.png'), side: THREE.DoubleSide }),\r\n        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load('mars/mandaris_rt.png'), side: THREE.DoubleSide }),\r\n        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load('mars/mandaris_lf.png'), side: THREE.DoubleSide })\r\n    ]\r\n\r\n    var marsMaterial = new THREE.MeshFaceMaterial(marsMaterials)\r\n\r\n    var mars = new THREE.Mesh(marsGeo, marsMaterial)\r\n    scene.add(mars)\r\n\r\n    // var ambientLight = new THREE.AmbientLight(0xFFFFFF, 1.3);\r\n    // scene.add(ambientLight)\r\n\r\n    useEffect(() => {\r\n        loader.load('RobotExpressive.glb', function (gltf) {\r\n\r\n            model.current = gltf.scene;\r\n            scene.add(model.current);\r\n\r\n            createGUI(model.current, gltf.animations);\r\n            renderer.setPixelRatio(window.devicePixelRatio);\r\n            renderer.setSize(window.innerWidth - 10, window.innerHeight - 10);\r\n            renderer.autoClear = false;\r\n            renderer.gammaOutput = true;\r\n            renderer.gammaFactor = 2.2;\r\n            mount.current.appendChild(renderer.domElement);\r\n\r\n            scene.add(arrowHelper);\r\n\r\n            // stats\r\n            camera.lookAt(model.current.position)\r\n            addDangerCube()\r\n\r\n            // mount.current.appendChild(stats.dom);\r\n            animate()\r\n\r\n        }, undefined, function (e) {\r\n\r\n            console.error(e);\r\n\r\n        });\r\n\r\n        // controls = new OrbitControls(camera, renderer.domElement)\r\n\r\n        const keypress = onKeyPress\r\n        window.addEventListener('keydown', keypress)\r\n        window.addEventListener('resize', onWindowResize, false);\r\n        // const setint = setInterval(() => {\r\n        // }, 10000);\r\n        return () => {\r\n            window.removeEventListener('keydown', keypress)\r\n            window.removeEventListener('resize', onWindowResize, false);\r\n\r\n            // clearInterval(setint)\r\n        }\r\n        // only execute when component initilize\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const createGUI = (model, animations) => {\r\n\r\n        var states = ['Idle', 'Walking', 'Running', 'Dance', 'Death', 'Sitting', 'Standing'];\r\n        var emotes = ['Jump', 'Yes', 'No', 'Wave', 'Punch', 'ThumbsUp'];\r\n\r\n        // gui = new GUI();\r\n\r\n        mixer = new THREE.AnimationMixer(model);\r\n\r\n        actions = {};\r\n\r\n        for (i = 0; i < animations.length; i++) {\r\n\r\n            var clip = animations[i];\r\n            var action = mixer.clipAction(clip);\r\n            actions[clip.name] = action;\r\n\r\n            if (emotes.indexOf(clip.name) >= 0 || states.indexOf(clip.name) >= 4) {\r\n\r\n                action.clampWhenFinished = true;\r\n                action.loop = THREE.LoopOnce;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // states\r\n\r\n        // var statesFolder = gui.addFolder('States');\r\n\r\n        // var clipCtrl = statesFolder.add(api, 'state').options(states);\r\n\r\n        // clipCtrl.onChange(function () {\r\n\r\n        //     fadeToAction(api.state, 0.5);\r\n\r\n        // });\r\n\r\n        // statesFolder.open();\r\n\r\n        // emotes\r\n\r\n        // var emoteFolder = gui.addFolder('Emotes');\r\n\r\n\r\n\r\n        // for (i = 0; i < emotes.length; i++) {\r\n\r\n        //     createEmoteCallback(emotes[i]);\r\n\r\n        // }\r\n\r\n        // emoteFolder.open();\r\n\r\n        // expressions\r\n\r\n        // face = model.getObjectByName('Head_2');\r\n\r\n        // var expressions = Object.keys(face.morphTargetDictionary);\r\n        // var expressionFolder = gui.addFolder('Expressions');\r\n\r\n        // for (i = 0; i < expressions.length; i++) {\r\n\r\n        //     expressionFolder.add(face.morphTargetInfluences, i, 0, 1, 0.01).name(expressions[i]);\r\n\r\n        // }\r\n\r\n        activeAction = actions['Walking'];\r\n        activeAction.play();\r\n\r\n        // expressionFolder.open();\r\n\r\n    }\r\n\r\n    const fadeToAction = (name, duration, callback) => {\r\n\r\n        previousAction = activeAction;\r\n        activeAction = actions[name];\r\n\r\n        if (previousAction !== activeAction) {\r\n\r\n            previousAction.fadeOut(duration);\r\n\r\n        }\r\n\r\n        if (callback)\r\n            setTimeout(() => callback(), 3000 * duration)\r\n\r\n        activeAction\r\n            .reset()\r\n            .setEffectiveTimeScale(1)\r\n            .setEffectiveWeight(1)\r\n            .fadeIn(duration)\r\n            .play();\r\n    }\r\n\r\n    const onWindowResize = () => {\r\n\r\n        camera.aspect = window.innerWidth / window.innerHeight;\r\n        camera.updateProjectionMatrix();\r\n\r\n        renderer.setSize(window.innerWidth, window.innerHeight);\r\n\r\n    }\r\n\r\n    //\r\n\r\n    const animate = () => {\r\n\r\n        var dt = clock.getDelta();\r\n\r\n        if (mixer) mixer.update(dt);\r\n\r\n        requestID = requestAnimationFrame(animate);\r\n\r\n        renderer.render(scene, camera);\r\n\r\n        // stats.update();\r\n        update()\r\n    }\r\n    const update = () => {\r\n        // controls.update();\r\n        // console.log('Danger Cubes :  ', dcubes.length)\r\n        cube.rotation.y += 0.01;\r\n        cube.rotation.x += 0.01;\r\n        cube.rotation.z += 0.01;\r\n        if (activeAction._clip.name === 'Death')\r\n            return\r\n\r\n        let i = WALK_SPEED + (point.current * 0.02)\r\n        if (activeAction._clip.name === 'Running')\r\n            i = RUN_SPEED + (point.current * 0.02)\r\n        if (activeAction._clip.name === 'Walking' || activeAction._clip.name === 'Running') {\r\n\r\n            model.current.position[state.direction] += i * state.value;\r\n            camera.position[state.direction] += i * state.value;\r\n\r\n            if (checkCollide(model.current.position, cube.position, 2)) {\r\n                const state = activeAction._clip.name\r\n                success(state)\r\n            }\r\n\r\n            // Set Vector\r\n            arrowHelper.position.z = model.current.position.z - 5\r\n            arrowHelper.position.x = model.current.position.x\r\n            pointView.position.x = model.current.position.x - centerOffset\r\n            pointView.position.z = model.current.position.z + 1\r\n            arrowHelper.setDirection(new THREE.Vector3(cube.position.x - model.current.position.x, 0, cube.position.z - model.current.position.z))\r\n        }\r\n        if (model.current.position.x > 100 || model.current.position.x < -100 || model.current.position.z > 100 || model.current.position.z < -100 || deathCubesColide() > 0) {\r\n            fadeToAction('Death', 0.5, () => {\r\n                setAlive(false)\r\n                window.cancelAnimationFrame(requestID);\r\n            })\r\n        }\r\n    }\r\n\r\n    const onKeyPress = (e) => {\r\n        if (e.key === currKey && activeAction._clip.name !== 'Running') {\r\n            fadeToAction('Running', 0.5)\r\n            return\r\n        } else if (e.key === currKey && activeAction._clip.name === 'Running')\r\n            return\r\n        else\r\n            fadeToAction('Walking', 0.5)\r\n        if (e.key === LEFT || e.keyCode === 37) {\r\n            state = { direction: 'x', value: 1 }\r\n            rotate(1);\r\n        } else if (e.key === UP || e.keyCode === 38) {\r\n            state = { direction: 'z', value: 1 }\r\n            rotate(0);\r\n        } else if (e.key === RIGHT || e.keyCode === 39) {\r\n            state = { direction: 'x', value: -1 }\r\n            rotate(-1);\r\n        } else if (e.key === DOWN || e.keyCode === 40) {\r\n            state = { direction: 'z', value: -1 }\r\n            rotate(2);\r\n        }\r\n        currKey = e.key\r\n    }\r\n    const rotate = (dir) => {\r\n        model.current.rotation.y = 1.6 * dir;\r\n    }\r\n\r\n    const success = (state) => {\r\n        fadeToAction('Jump', 0.2, () => fadeToAction(state, 0.2))\r\n        point.current = point.current + 1\r\n        scene.remove(pointView)\r\n        loadText();\r\n        const newCube = createCube()\r\n        dcubes.push(newCube)\r\n        scene.add(newCube)\r\n        RandomCube(cube, null, null, model.current.position)\r\n        addDangerCube()\r\n        document.getElementsByClassName('score')[0].innerHTML = `Score ${point.current * 1000}`\r\n    }\r\n\r\n    const addDangerCube = () => {\r\n        for (let i = 0; i < dcubes.length; i++) {\r\n            RandomCube(dcubes[i], cube.position, dcubes.slice(0, i), model.current.position)\r\n            // const element = array[i];\r\n        }\r\n    }\r\n    const deathCubesColide = () => {\r\n        return dcubes.filter(cube => checkCollide(model.current.position, cube.position, 3)).length;\r\n    }\r\n    return (\r\n        <div>\r\n            <div ref={mount} />\r\n            <button style={{ bottom: '10vw', right: '10vw', }} onClick={(e) => onKeyPress({ ...e, key: UP })}>{UP}</button>\r\n            <button style={{ bottom: 0, right: '10vw', }} onClick={(e) => onKeyPress({ ...e, key: DOWN })}>{DOWN}</button>\r\n            <button style={{ bottom: 0, right: 0, }} onClick={(e) => onKeyPress({ ...e, key: RIGHT })}>{RIGHT}</button>\r\n            <button style={{ bottom: 0, right: '20vw', }} onClick={(e) => onKeyPress({ ...e, key: LEFT })}>{LEFT}</button>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Robot;\r\n","import React, { useState, useRef } from 'react'\r\nimport Robot from './Robot'\r\n\r\nconst Main = () => {\r\n\r\n    let point = useRef(1)\r\n    const [alive, setAlive] = useState(true)\r\n\r\n    const getGame = () => {\r\n        point.current = 1\r\n        return <Robot point={point} setAlive={setAlive} />\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!alive && <div style={{ display: 'flex', justifyContent: 'space-around', alignContent: 'center', backgroundColor: 'black', opacity: 0.8, filter: 'alpha(opacity=80)' }}>\r\n                <div className='score' style={{ display: 'flex', flexFlow: 'column', justifyContent: 'space-between', alignItems: 'center', width: '400px', height: '300px' }}>\r\n                    Score {point.current * 1000}\r\n                    <br />\r\n                    Greate Job\r\n                    <button style={{ width: '25vw', position: 'relative' }} onClick={() => setAlive(true)}>Continue</button>\r\n                </div>\r\n            </div>}\r\n            {alive && getGame()}\r\n            {alive && <div className='score' style={{ top: '10px', right: '10px', }}>Score {point.current * 1000}</div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n// import Square from './Square';\r\nimport Main from './main'\r\nconst App = () => {\r\n\r\n  return (\r\n      <Main />\r\n    // <div>\r\n    //   <button style={{position:'fixed',bottom:30,left:30,zIndex:0}} onClick={() => setFlag(!flag)}>W</button>\r\n    //   <button style={{position:'fixed',bottom:0,left:30,zIndex:0}} onClick={() => setFlag(!flag)}>S</button>\r\n    //   <button style={{position:'fixed',bottom:0,left:60,zIndex:0}} onClick={() => setFlag(!flag)}>D</button>\r\n    //   <button style={{position:'fixed',bottom:0,zIndex:0}} onClick={() => setFlag(!flag)}>A</button> */}\r\n    //   {flag ? <Robot /> : <Square /> }\r\n    //   <Square />\r\n    // </div>\r\n  );\r\n\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// import Square from './Square'\n\n// ReactDOM.render(<Square />, document.getElementById('root'));\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}