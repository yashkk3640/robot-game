(this["webpackJsonprobot-game"]=this["webpackJsonprobot-game"]||[]).push([[0],{12:function(e,n,t){"use strict";t.r(n);var i=t(1),r=t.n(i),o=t(3),a=t.n(o),c=t(6),s=t(4),l=t(0),u=t(5),d=t.n(u),p=new l.OctahedronGeometry(2,0),m=new l.IcosahedronBufferGeometry(4,1),w=new l.MeshStandardMaterial({color:13938487,roughness:.5,metalness:1}),f=new l.MeshLambertMaterial({color:16777215,opacity:.6,transparent:!0}),h=new l.Mesh(p,w),v=(new l.Mesh(p,new l.MeshBasicMaterial({color:11184810})),function(){return new l.Mesh(m,f)}),g=function e(n,t,i,r){var o=Math.random()>.5?1:-1,a=Math.random()>.5?1:-1,c=2*Math.round(50*Math.random())*o,s=2*Math.round(50*Math.random())*a,l=o>0?c-c%25-2.5:c-c%25+2.5,u=a>0?s-s%25-2.5:s-s%25+2.5;if(r&&b(r,{x:l,z:u},8))return console.log("model colide"),void e(n,t,i,r);if(t&&t.x===l&&t.z===u)e(n,t,i,r);else{if(i&&i.lenght>0&&i.filter((function(e){return e.position.x===l&&e.position.z===u}))>0)return console.log("Danger colide"),void e(n,t,i,r);n.position.x=l,n.position.z=u,n.position.y=2.6}},b=function(e,n,t){var i=e.x-n.x,r=e.z-n.z;return Math.sqrt(i*i+r*r)<t};function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(t,!0).forEach((function(n){Object(s.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M=[v(),v(),v(),v(),v(),v(),v(),v()],k=512*window.devicePixelRatio;console.log(k);var E=function(e){var n,t,o,a,c,s,u,p,m,w,f=e.point,y=e.setAlive;g(h);var k="w",E={direction:"z",value:1},O=Object(i.useRef)(),z=Object(i.useRef)(),S=new l.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.25,2e4);S.position.set(0,10,-30);var j=new l.Scene,C=new l.Clock;M.forEach((function(e){j.add(e)}));var D=new l.Vector3(1,0,0);D.normalize();var L=new l.Vector3(0,.1,-5),P=new l.ArrowHelper(D,L,5,16711680,3),B=new l.HemisphereLight(16777215,4473924);B.position.set(0,20,0),j.add(B),(B=new l.DirectionalLight(16777215)).position.set(0,20,10),j.add(B);var R=new l.Mesh(new l.PlaneBufferGeometry(2e3,2e3),new l.MeshPhongMaterial({color:16777215,depthWrite:!1}));R.rotation.x=-Math.PI/2,j.add(R);var _=new l.GridHelper(200,40,0,0);_.material.opacity=.2,_.material.transparent=!1,j.add(_),j.add(h);var W=new d.a,T=new l.WebGLRenderer({antialias:!0,alpha:!0}),A=function(){(u=new l.TextGeometry("Point ".concat(f.current),{font:m,size:2,height:1,curveSegments:1,bevelEnabled:!0,bevelThickness:.1,bevelSize:.01,weight:"normal",bevelOffset:0,bevelSegments:1})).computeBoundingBox(),u.computeVertexNormals(),p=-.5*(u.boundingBox.max.x-u.boundingBox.min.x),(s=new l.Mesh(u,new l.MeshLambertMaterial({color:2241450}))).rotation.y=3.2,s.position.y=5,s.position.x=p,s.castShadow=!0,j.add(s)};(new l.FontLoader).load("helvetiker_regular.typeface.js",(function(e){m=e,A()}),null,(function(e){return console.log(e)}));var G=new l.CubeGeometry(1e3,1e3,1e3),H=[new l.MeshBasicMaterial({map:(new l.TextureLoader).load("mars/mandaris_ft.png"),side:l.DoubleSide}),new l.MeshBasicMaterial({map:(new l.TextureLoader).load("mars/mandaris_bk.png"),side:l.DoubleSide}),new l.MeshBasicMaterial({map:(new l.TextureLoader).load("mars/mandaris_up.png"),side:l.DoubleSide}),new l.MeshBasicMaterial({map:(new l.TextureLoader).load("mars/mandaris_dn.png"),side:l.DoubleSide}),new l.MeshBasicMaterial({map:(new l.TextureLoader).load("mars/mandaris_rt.png"),side:l.DoubleSide}),new l.MeshBasicMaterial({map:(new l.TextureLoader).load("mars/mandaris_lf.png"),side:l.DoubleSide})],F=new l.MeshFaceMaterial(H),I=new l.Mesh(G,F);j.add(I),Object(i.useEffect)((function(){W.load("RobotExpressive.glb",(function(e){z.current=e.scene,j.add(z.current),J(z.current,e.animations),T.setPixelRatio(window.devicePixelRatio),T.setSize(window.innerWidth-10,window.innerHeight-10),T.autoClear=!1,T.gammaOutput=!0,T.gammaFactor=2.2,O.current.appendChild(T.domElement),j.add(P),S.lookAt(z.current.position),X(),q()}),void 0,(function(e){console.error(e)}));var e=Y;return window.addEventListener("keydown",e),window.addEventListener("resize",V,!1),function(){window.removeEventListener("keydown",e),window.removeEventListener("resize",V,!1)}}),[]);var J=function(e,i){var r=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],a=["Jump","Yes","No","Wave","Punch","ThumbsUp"];for(n=new l.AnimationMixer(e),t={},c=0;c<i.length;c++){var s=i[c],u=n.clipAction(s);t[s.name]=u,(a.indexOf(s.name)>=0||r.indexOf(s.name)>=4)&&(u.clampWhenFinished=!0,u.loop=l.LoopOnce)}(o=t.Walking).play()},N=function(e,n,i){a=o,o=t[e],a!==o&&a.fadeOut(n),i&&setTimeout((function(){return i()}),3e3*n),o.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(n).play()},V=function(){S.aspect=window.innerWidth/window.innerHeight,S.updateProjectionMatrix(),T.setSize(window.innerWidth,window.innerHeight)},q=function e(){var t=C.getDelta();n&&n.update(t),w=requestAnimationFrame(e),T.render(j,S),U()},U=function(){if(h.rotation.y+=.01,h.rotation.x+=.01,h.rotation.z+=.01,"Death"!==o._clip.name){var e=.1+.02*f.current;if("Running"===o._clip.name&&(e=.2+.02*f.current),"Walking"===o._clip.name||"Running"===o._clip.name){if(z.current.position[E.direction]+=e*E.value,S.position[E.direction]+=e*E.value,b(z.current.position,h.position,2)){var n=o._clip.name;Q(n)}P.position.z=z.current.position.z-5,P.position.x=z.current.position.x,s.position.x=z.current.position.x-p,s.position.z=z.current.position.z+1,P.setDirection(new l.Vector3(h.position.x-z.current.position.x,0,h.position.z-z.current.position.z))}(z.current.position.x>100||z.current.position.x<-100||z.current.position.z>100||z.current.position.z<-100||Z()>0)&&N("Death",.5,(function(){y(!1),window.cancelAnimationFrame(w)}))}},Y=function(e){e.key!==k||"Running"===o._clip.name?e.key===k&&"Running"===o._clip.name||(N("Walking",.5),"a"===e.key||37===e.keyCode?(E={direction:"x",value:1},K(1)):"w"===e.key||38===e.keyCode?(E={direction:"z",value:1},K(0)):"d"===e.key||39===e.keyCode?(E={direction:"x",value:-1},K(-1)):"s"!==e.key&&40!==e.keyCode||(E={direction:"z",value:-1},K(2)),k=e.key):N("Running",.5)},K=function(e){z.current.rotation.y=1.6*e},Q=function(e){N("Jump",.2,(function(){return N(e,.2)})),f.current=f.current+1,j.remove(s),A();var n=v();M.push(n),j.add(n),g(h,null,null,z.current.position),X(),document.getElementsByClassName("score")[0].innerHTML="Score ".concat(1e3*f.current)},X=function(){for(var e=0;e<M.length;e++)g(M[e],h.position,M.slice(0,e),z.current.position)},Z=function(){return M.filter((function(e){return b(z.current.position,e.position,3)})).length};return r.a.createElement("div",null,r.a.createElement("div",{ref:O}),r.a.createElement("button",{style:{bottom:"10vw",right:"10vw"},onClick:function(e){return Y(x({},e,{key:"w"}))}},"w"),r.a.createElement("button",{style:{bottom:0,right:"10vw"},onClick:function(e){return Y(x({},e,{key:"s"}))}},"s"),r.a.createElement("button",{style:{bottom:0,right:0},onClick:function(e){return Y(x({},e,{key:"d"}))}},"d"),r.a.createElement("button",{style:{bottom:0,right:"20vw"},onClick:function(e){return Y(x({},e,{key:"a"}))}},"a"))},O=function(){var e=Object(i.useRef)(1),n=Object(i.useState)(!0),t=Object(c.a)(n,2),o=t[0],a=t[1];return r.a.createElement("div",null,!o&&r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignContent:"center",backgroundColor:"black",opacity:.8,filter:"alpha(opacity=80)"}},r.a.createElement("div",{className:"score",style:{display:"flex",flexFlow:"column",justifyContent:"space-between",alignItems:"center",width:"400px",height:"300px"}},"Score ",1e3*e.current,r.a.createElement("br",null),"Greate Job",r.a.createElement("button",{style:{width:"25vw",position:"relative"},onClick:function(){return a(!0)}},"Continue"))),o&&(e.current=1,r.a.createElement(E,{point:e,setAlive:a})),o&&r.a.createElement("div",{className:"score",style:{top:"10px",right:"10px"}},"Score ",1e3*e.current))},z=function(){return r.a.createElement(O,null)};a.a.render(r.a.createElement(z,null),document.getElementById("root"))},7:function(e,n,t){e.exports=t(12)}},[[7,1,2]]]);
//# sourceMappingURL=main.0fd82ded.chunk.js.map