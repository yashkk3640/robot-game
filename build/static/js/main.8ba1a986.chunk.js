(this["webpackJsonprobot-game"]=this["webpackJsonprobot-game"]||[]).push([[0],{11:function(e,n,t){"use strict";t.r(n);var i=t(1),o=t.n(i),r=t(3),a=t.n(r),c=t(4),u=t(0),s=t(5),l=t.n(s),d=new u.BoxGeometry(3,3,3),p=new u.MeshBasicMaterial({color:65280}),m=new u.Mesh(d,p),w=function(e){var n=Math.round(2*Math.random())-1?1:-1,t=Math.round(2*Math.random())-1?1:-1,i=2*Math.round(39*Math.random())*n,o=2*Math.round(39*Math.random())*t;e.position.x=i,e.position.z=o,e.position.y=1};function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(t,!0).forEach((function(n){Object(c.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=function(){w(m);var e,n,t,r,a,c,s,d,p,f=1,v="w",g={direction:"z",value:1},b=Object(i.useRef)(),y=Object(i.useRef)(),x=new u.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.25,300);x.position.set(0,10,-30),x.lookAt(new u.Vector3(2,2,0));var k=new u.Scene;k.background=new u.Color(14737632),k.fog=new u.Fog(14737632,50,300);var O=new u.Clock,E=new u.Vector3(1,0,0);E.normalize();var M=new u.Vector3(0,.1,-5),z=new u.ArrowHelper(E,M,5,16711680,3),j=new u.HemisphereLight(16777215,4473924);j.position.set(0,20,0),k.add(j),(j=new u.DirectionalLight(16777215)).position.set(0,20,10),k.add(j);var P=new u.Mesh(new u.PlaneBufferGeometry(2e3,2e3),new u.MeshPhongMaterial({color:10066329,depthWrite:!1}));P.rotation.x=-Math.PI/2,k.add(P);var W=new u.GridHelper(200,40,0,0);W.material.opacity=.2,W.material.transparent=!0,k.add(W),k.add(m);var S=new l.a,D=new u.WebGLRenderer({antialias:!0}),L=function(){(s=new u.TextGeometry("Point ".concat(f),{font:p,size:2,height:1,curveSegments:1,bevelEnabled:!0,bevelThickness:.1,bevelSize:.01,weight:"normal",bevelOffset:0,bevelSegments:1})).computeBoundingBox(),s.computeVertexNormals(),d=-.5*(s.boundingBox.max.x-s.boundingBox.min.x),(c=new u.Mesh(s,new u.MeshLambertMaterial({color:2241450}))).rotation.y=3.2,c.position.y=5,c.position.x=d,c.castShadow=!0,k.add(c)};(new u.FontLoader).load("helvetiker_regular.typeface.js",(function(e){p=e,L()}),null,(function(e){return console.log(e)})),Object(i.useEffect)((function(){S.load("RobotExpressive.glb",(function(e){y.current=e.scene,k.add(y.current),R(y.current,e.animations),D.setSize(window.innerWidth-10,window.innerHeight-10),D.gammaOutput=!0,D.gammaFactor=2.2,b.current.appendChild(D.domElement),k.add(z),H()}),void 0,(function(e){console.error(e)}));var e=A;return window.addEventListener("keypress",e),window.addEventListener("resize",C,!1),function(){window.removeEventListener("keypress",e),window.removeEventListener("resize",C,!1)}}),[]);var R=function(i,o){var r=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],c=["Jump","Yes","No","Wave","Punch","ThumbsUp"];for(e=new u.AnimationMixer(i),n={},a=0;a<o.length;a++){var s=o[a],l=e.clipAction(s);n[s.name]=l,(c.indexOf(s.name)>=0||r.indexOf(s.name)>=4)&&(l.clampWhenFinished=!0,l.loop=u.LoopOnce)}(t=n.Walking).play()},B=function(e,i,o){r=t,t=n[e],r!==t&&r.fadeOut(i),o&&setTimeout((function(){return o()}),3e3*i),t.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(i).play()},C=function(){x.aspect=window.innerWidth/window.innerHeight,x.updateProjectionMatrix(),D.setSize(window.innerWidth,window.innerHeight)},H=function n(){var t=O.getDelta();e&&e.update(t),requestAnimationFrame(n),D.render(k,x),_()},_=function(){if("Death"!==t._clip.name){var e=.1;if("Running"===t._clip.name&&(e=.2),"Walking"===t._clip.name||"Running"===t._clip.name){if(y.current.position[g.direction]+=e*g.value,x.position[g.direction]+=e*g.value,function(e,n,t){var i=e.x-n.x,o=e.z-n.z;return Math.sqrt(i*i+o*o)<t}(y.current.position,m.position,2)){var n=t._clip.name;B("Jump",.2,(function(){return B(n,.2)})),f+=1,k.remove(c),L(),c.updateMorphTargets(),w(m)}z.position.z=y.current.position.z-5,z.position.x=y.current.position.x,c.position.x=y.current.position.x-d,c.position.z=y.current.position.z+1,z.setDirection(new u.Vector3(m.position.x-y.current.position.x,0,m.position.z-y.current.position.z))}(y.current.position.x>100||y.current.position.x<-100||y.current.position.z>100||y.current.position.z<-100)&&B("Death",.5)}},A=function(e){e.key!==v||"Running"===t._clip.name?(B("Walking",.5),"a"===e.key?(g={direction:"x",value:1},T(1)):"w"===e.key?(g={direction:"z",value:1},T(0)):"s"===e.key?(g={direction:"z",value:-1},T(2)):"d"===e.key&&(g={direction:"x",value:-1},T(-1)),v=e.key):B("Running",.5)},T=function(e){y.current.rotation.y=1.6*e};return o.a.createElement("div",null,o.a.createElement("div",{ref:function(e){return b.current=e}}),o.a.createElement("button",{style:{bottom:"10vw",right:"10vw"},onClick:function(e){return A(h({},e,{key:"w"}))}},"W"),o.a.createElement("button",{style:{bottom:0,right:"10vw"},onClick:function(e){return A(h({},e,{key:"s"}))}},"S"),o.a.createElement("button",{style:{bottom:0,right:0},onClick:function(e){return A(h({},e,{key:"d"}))}},"D"),o.a.createElement("button",{style:{bottom:0,right:"20vw"},onClick:function(e){return A(h({},e,{key:"a"}))}},"A"))},g=function(){return o.a.createElement("div",null,o.a.createElement(v,null))};a.a.render(o.a.createElement(g,null),document.getElementById("root"))},6:function(e,n,t){e.exports=t(11)}},[[6,1,2]]]);
//# sourceMappingURL=main.8ba1a986.chunk.js.map